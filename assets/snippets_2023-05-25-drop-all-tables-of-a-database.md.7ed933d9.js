import{_ as a,a as s,b as e}from"./chunks/facebook.cfa388ff.js";import{_ as t,c as l,o as n,a as o}from"./app.05a9f497.js";const p="/snippets/2023-05-25/drop-all-tables-of-a-database.svg",_=JSON.parse('{"title":"Drop All Tables Of A Database","description":"The code block drops all base tables in the current database using dynamic SQL.","frontmatter":{"layout":"doc","title":"Drop All Tables Of A Database","description":"The code block drops all base tables in the current database using dynamic SQL.","head":[["meta",{"name":"keywords","content":"sqlserver drop-tables sql-query"}],["meta",{"name":"og:type","content":"article"}],["meta",{"name":"og:url","content":"https://muathye.com/snippets/2023-05-25-drop-all-tables-of-a-database"}],["meta",{"name":"og:title","content":"Drop All Tables Of A Database"}],["meta",{"name":"og:description","content":"The code block drops all base tables in the current database using dynamic SQL."}],["meta",{"name":"og:image","content":"https://muathye.com/snippets/2023-05-25/drop-all-tables-of-a-database.svg"}]]},"headers":[],"relativePath":"snippets/2023-05-25-drop-all-tables-of-a-database.md","lastUpdated":1685474080000}'),r={name:"snippets/2023-05-25-drop-all-tables-of-a-database.md"},c=o('<p><img src="'+p+`" alt="An image"></p><p><a href="https://ray.so/#code=REVDTEFSRSBAc3FsIE5WQVJDSEFSKG1heCk9JycKClNFTEVDVCBAc3FsICs9ICcgRHJvcCB0YWJsZSAnICsgUVVPVEVOQU1FKFRBQkxFX1NDSEVNQSkgKyAnLicrIFFVT1RFTkFNRShUQUJMRV9OQU1FKSArICc7ICcKRlJPTSAgIElORk9STUFUSU9OX1NDSEVNQS5UQUJMRVMKV0hFUkUgIFRBQkxFX1RZUEUgPSAnQkFTRSBUQUJMRScKCkV4ZWMgU3BfZXhlY3V0ZXNxbCBAc3Fs&amp;width=708&amp;theme=sunset&amp;title=Drop+all+tables+of+a+database" target="_blank" rel="noreferrer">ray.so</a></p><h1 id="drop-all-tables-of-a-database" tabindex="-1">Drop All Tables Of A Database <a class="header-anchor" href="#drop-all-tables-of-a-database" aria-hidden="true">#</a></h1><p>This is a SQL code block written in Microsoft SQL Server.</p><p>The code block declares a variable @sql of type NVARCHAR(max) and initializes it to an empty string.</p><p>The SELECT statement retrieves the names of all the base tables in the current database using the INFORMATION_SCHEMA.TABLES view. For each table, it concatenates a DROP TABLE statement with the fully qualified table name (i.e., including the schema name) and appends it to the @sql variable using the += operator. The QUOTENAME function is used to properly escape and delimit the table and schema names, which helps to avoid SQL injection attacks.</p><p>Finally, the sp_executesql system stored procedure is called with the @sql variable as its argument to execute the dynamically generated SQL code and drop all the tables that were selected by the SELECT statement.</p><div class="language-sql"><button class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">DECLARE</span><span style="color:#A6ACCD;"> @sql </span><span style="color:#F78C6C;">NVARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">max</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> @sql </span><span style="color:#89DDFF;">+=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> Drop table </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">QUOTENAME</span><span style="color:#A6ACCD;">(TABLE_SCHEMA) </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">QUOTENAME</span><span style="color:#A6ACCD;">(TABLE_NAME) </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">; </span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;">   INFORMATION_SCHEMA.TABLES</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;">  TABLE_TYPE </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">BASE TABLE</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">Exec</span><span style="color:#A6ACCD;"> Sp_executesql @sql</span></span>
<span class="line"></span></code></pre></div><div style="display:flex;justify-content:end;"><a href="https://twitter.com/intent/tweet?url=https://muathye.com/snippets/2023-05-25-drop-all-tables-of-a-database&amp;text=Drop All Tables Of A Database" target="_blank"><img style="height:32px;padding:0 5px;" title="Share on twitter" src="`+a+'"></a><a href="https://api.whatsapp.com/send?text=https://muathye.com/snippets/2023-05-25-drop-all-tables-of-a-database" target="_blank"><img style="height:32px;padding:0 5px;" title="Share on whatsapp" src="'+s+'"></a><a href="https://www.facebook.com/sharer/sharer.php?u=https://muathye.com/snippets/2023-05-25-drop-all-tables-of-a-database" target="_blank"><img style="height:32px;padding:0 5px;" title="Share on facebook" src="'+e+'"></a></div>',9),i=[c];function d(A,h,y,D,b,C){return n(),l("div",null,i)}const E=t(r,[["render",d]]);export{_ as __pageData,E as default};
