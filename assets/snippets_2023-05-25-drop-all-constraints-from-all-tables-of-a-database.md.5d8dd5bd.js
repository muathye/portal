import{_ as s,a,b as t}from"./chunks/facebook.9107dbc3.js";import{_ as n,o as l,c as e,S as o}from"./chunks/framework.0c55f2c5.js";const p="/snippets/2023-05-25/drop-all-constraints-from-all-tables-of-a-database.svg",f=JSON.parse('{"title":"Drop All Constraints From All Tables Of A Database","description":"This SQL script drops certain types of constraints from all tables in the database.","frontmatter":{"layout":"doc","title":"Drop All Constraints From All Tables Of A Database","description":"This SQL script drops certain types of constraints from all tables in the database.","head":[["meta",{"name":"keywords","content":"sqlserver tables-constraints sql-query"}],["meta",{"name":"og:type","content":"article"}],["meta",{"name":"og:url","content":"https://muathye.com/snippets/2023-05-25-drop-all-constraints-from-all-tables-of-a-database"}],["meta",{"name":"og:title","content":"Drop All Constraints From All Tables Of A Database"}],["meta",{"name":"og:description","content":"This SQL script drops certain types of constraints from all tables in the database."}],["meta",{"name":"og:image","content":"https://muathye.com/snippets/2023-05-25/drop-all-constraints-from-all-tables-of-a-database.svg"}]]},"headers":[],"relativePath":"snippets/2023-05-25-drop-all-constraints-from-all-tables-of-a-database.md","filePath":"snippets/2023-05-25-drop-all-constraints-from-all-tables-of-a-database.md","lastUpdated":1693023293000}'),r={name:"snippets/2023-05-25-drop-all-constraints-from-all-tables-of-a-database.md"},c=o('<p><img src="'+p+`" alt="An image"></p><p><a href="https://ray.so/#code=REVDTEFSRSBAc3FsIE5WQVJDSEFSKE1BWCk7ClNFVCBAc3FsID0gTicnOwoKU0VMRUNUIEBzcWwgPSBAc3FsICsgTicKICBBTFRFUiBUQUJMRSAnICsgUVVPVEVOQU1FKHMubmFtZSkgKyBOJy4nCiAgKyBRVU9URU5BTUUodC5uYW1lKSArIE4nIERST1AgQ09OU1RSQUlOVCAnCiAgKyBRVU9URU5BTUUoYy5uYW1lKSArICc7JwpGUk9NIHN5cy5vYmplY3RzIEFTIGMKSU5ORVIgSk9JTiBzeXMudGFibGVzIEFTIHQKT04gYy5wYXJlbnRfb2JqZWN0X2lkID0gdC5bb2JqZWN0X2lkXQpJTk5FUiBKT0lOIHN5cy5zY2hlbWFzIEFTIHMgCk9OIHQuW3NjaGVtYV9pZF0gPSBzLltzY2hlbWFfaWRdCldIRVJFIGMuW3R5cGVdIElOICgnRCcsJ0MnLCdGJywnUEsnLCdVUScpCk9SREVSIEJZIGMuW3R5cGVdOwoKUFJJTlQgQHNxbDsKRVhFQyBzeXMuc3BfZXhlY3V0ZXNxbCBAc3FsOw&amp;width=708&amp;theme=sunset&amp;title=Drop+all+constraints+from+all+tables+of+a+database" target="_blank" rel="noreferrer">ray.so</a></p><h1 id="drop-all-constraints-from-all-tables-of-a-database" tabindex="-1">Drop All Constraints From All Tables Of A Database <a class="header-anchor" href="#drop-all-constraints-from-all-tables-of-a-database" aria-label="Permalink to &quot;Drop All Constraints From All Tables Of A Database&quot;">â€‹</a></h1><p>This is a SQL script that generates a dynamic SQL statement to drop all constraints of certain types (D: Default constraints, C: Check constraints, F: Foreign Key constraints, PK: Primary Key constraints, UQ: Unique constraints) from all tables in the database.</p><p>The script first declares a variable called @sql of type NVARCHAR(MAX) and initializes it to an empty string. Then it selects all the constraints of the specified types from the system tables and builds a dynamic SQL statement by concatenating the ALTER TABLE statement with the names of the schema, table, and constraint, and appends it to @sql.</p><p>Finally, the script prints the generated SQL statement to the console using the PRINT statement. If you want to execute the generated SQL statement, you can uncomment the last line of the script, which uses the sp_executesql stored procedure to execute the dynamic SQL statement.</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">DECLARE</span><span style="color:#A6ACCD;"> @sql </span><span style="color:#F78C6C;">NVARCHAR</span><span style="color:#A6ACCD;">(MAX);</span></span>
<span class="line"><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> @sql </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">N</span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> @sql </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> @sql </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> N</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#C3E88D;">  ALTER TABLE </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">QUOTENAME</span><span style="color:#A6ACCD;">(s.name) </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">N</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">QUOTENAME</span><span style="color:#A6ACCD;">(t.name) </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">N</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> DROP CONSTRAINT </span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">QUOTENAME</span><span style="color:#A6ACCD;">(c.name) </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">;</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> sys.objects </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> c</span></span>
<span class="line"><span style="color:#F78C6C;">INNER JOIN</span><span style="color:#A6ACCD;"> sys.tables </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> t</span></span>
<span class="line"><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> c.parent_object_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> t.[object_id]</span></span>
<span class="line"><span style="color:#F78C6C;">INNER JOIN</span><span style="color:#A6ACCD;"> sys.schemas </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> s </span></span>
<span class="line"><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> t.[schema_id] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> s.[schema_id]</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> c.[type] </span><span style="color:#F78C6C;">IN</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">D</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">C</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">F</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">PK</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">UQ</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#F78C6C;">ORDER BY</span><span style="color:#A6ACCD;"> c.[type];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">PRINT</span><span style="color:#A6ACCD;"> @sql;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--EXEC sys.sp_executesql @sql;</span></span></code></pre></div><div style="display:flex;justify-content:end;"><a href="https://twitter.com/intent/tweet?url=https://muathye.com/snippets/2023-05-25-drop-all-constraints-from-all-tables-of-a-database&amp;text=Drop All Constraints From All Tables Of A Database" target="_blank"><img style="height:32px;padding:0 5px;" title="Share on twitter" src="`+s+'"></a><a href="https://api.whatsapp.com/send?text=https://muathye.com/snippets/2023-05-25-drop-all-constraints-from-all-tables-of-a-database" target="_blank"><img style="height:32px;padding:0 5px;" title="Share on whatsapp" src="'+a+'"></a><a href="https://www.facebook.com/sharer/sharer.php?u=https://muathye.com/snippets/2023-05-25-drop-all-constraints-from-all-tables-of-a-database" target="_blank"><img style="height:32px;padding:0 5px;" title="Share on facebook" src="'+t+'"></a></div>',8),i=[c];function C(y,D,A,F,m,d){return l(),e("div",null,i)}const E=n(r,[["render",C]]);export{f as __pageData,E as default};
