import{_ as e,o as s,c as a,S as t}from"./chunks/framework.f15d8f8c.js";const g=JSON.parse('{"title":"Add SSH to Bitbucket for Windows","description":"Add SSH to Bitbucket for Windows.","frontmatter":{"layout":"doc","title":"Add SSH to Bitbucket for Windows","date":"2023-04-10T00:00:00.000Z","author":"Muath Alsowadi","gravatar":"19684bc9c928dffa64f9c23efb31ba86","twitter":"@muathye","description":"Add SSH to Bitbucket for Windows.","head":[["meta",{"name":"keywords","content":"ssh bitbucket windows"}],["meta",{"name":"og:type","content":"article"}],["meta",{"name":"og:url","content":"https://muathye.com/articles/2023-04-10-export-vscode-extensions-list"}],["meta",{"name":"og:title","content":"Add SSH to Bitbucket for Windows"}],["meta",{"name":"og:description","content":"How to Add SSH to Bitbucket for Windows."}],["meta",{"name":"og:image","content":"https://muathye.com/articles/2023-04-10/export-vscode-extensions-list.jpg"}]]},"headers":[],"relativePath":"articles/2023-04-10-add-ssh-to-bitbucket-for-windows.md","filePath":"articles/2023-04-10-add-ssh-to-bitbucket-for-windows.md","lastUpdated":1693949228000}'),n={name:"articles/2023-04-10-add-ssh-to-bitbucket-for-windows.md"},o=t(`<h1 id="add-ssh-to-bitbucket-for-windows" tabindex="-1">Add SSH to Bitbucket for Windows <a class="header-anchor" href="#add-ssh-to-bitbucket-for-windows" aria-label="Permalink to &quot;Add SSH to Bitbucket for Windows&quot;">​</a></h1><p>If you have an account on <a href="https://bitbucket.org" target="_blank" rel="noreferrer">bitbucket.org</a>, this article may help you</p><h3 id="ensure-ssh-is-installed-on-your-windows-by-opening-powershell" tabindex="-1">Ensure <code>ssh</code> is installed on your Windows by opening Powershell <a class="header-anchor" href="#ensure-ssh-is-installed-on-your-windows-by-opening-powershell" aria-label="Permalink to &quot;Ensure \`ssh\` is installed on your Windows by opening Powershell&quot;">​</a></h3><p>Use the <code>Get-Command ssh</code> command to check the path of ssh</p><div class="language-bat"><button title="Copy Code" class="copy"></button><span class="lang">bat</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">$ Get-Command </span><span style="color:#89DDFF;">ssh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">CommandType     Name        Version    Source</span></span>
<span class="line"><span style="color:#A6ACCD;">-----------     ----        -------    ------</span></span>
<span class="line"><span style="color:#A6ACCD;">Application     ssh.exe     8.1.0.1    C:\\Windows\\System32\\OpenSSH\\ssh.exe</span></span></code></pre></div><p>To configure Git to use the Windows version of OpenSSH, update the SSH command with git config, such as:</p><div class="language-bat"><button title="Copy Code" class="copy"></button><span class="lang">bat</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">git config --global core.sshCommand C:/Windows/System32/OpenSSH/ssh.exe</span></span></code></pre></div><h3 id="start-the-ssh-agent" tabindex="-1">Start the SSH agent <a class="header-anchor" href="#start-the-ssh-agent" aria-label="Permalink to &quot;Start the SSH agent&quot;">​</a></h3><p>To allow git to use your SSH key, an SSH agent needs to be running on your device.</p><h4 id="git-for-windows-users" tabindex="-1">Git for Windows users <a class="header-anchor" href="#git-for-windows-users" aria-label="Permalink to &quot;Git for Windows users&quot;">​</a></h4><p>From a git bash terminal, check if the SSH agent is running using the <code>ps -a | grep ssh-agent</code> command. If the ssh-agent is already running, it should appear in the output, such as:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">$ ps -a | grep ssh-agent</span></span>
<span class="line"><span style="color:#A6ACCD;">     3334       1    3334      20284  ?         197108 10:16:11 /usr/bin/ssh-agent</span></span></code></pre></div><p>To start the agent:</p><div class="language-bat"><button title="Copy Code" class="copy"></button><span class="lang">bat</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">eval $</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ssh-agent</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="windows-openssh-users" tabindex="-1">Windows OpenSSH users <a class="header-anchor" href="#windows-openssh-users" aria-label="Permalink to &quot;Windows OpenSSH users&quot;">​</a></h4><p>From a PowerShell, configure the SSH agent to start each time the device is started, use the Set-Service command:</p><div class="language-bat"><button title="Copy Code" class="copy"></button><span class="lang">bat</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Set-Service </span><span style="color:#89DDFF;">ssh-agent</span><span style="color:#A6ACCD;"> -StartupType Automatic</span></span></code></pre></div><p>Then To start the agent:</p><div class="language-bat"><button title="Copy Code" class="copy"></button><span class="lang">bat</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Start-Service </span><span style="color:#89DDFF;">ssh-agent</span></span></code></pre></div><p>To check if the SSH Agent is running use the <code>Get-Service ssh-agent</code> command</p><div class="language-bat"><button title="Copy Code" class="copy"></button><span class="lang">bat</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">$ Get-Service </span><span style="color:#89DDFF;">ssh-agent</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Status   Name               DisplayName</span></span>
<span class="line"><span style="color:#A6ACCD;">------   ----               -----------</span></span>
<span class="line"><span style="color:#A6ACCD;">Running  </span><span style="color:#89DDFF;">ssh-agent</span><span style="color:#A6ACCD;">          OpenSSH Authentication Agent</span></span></code></pre></div><h3 id="generate-an-ssh-key-pair" tabindex="-1">Generate an SSH key pair <a class="header-anchor" href="#generate-an-ssh-key-pair" aria-label="Permalink to &quot;Generate an SSH key pair&quot;">​</a></h3><h4 id="generate-the-ssh-key-with-the-following" tabindex="-1">Generate the <code>ssh</code> key with the following: <a class="header-anchor" href="#generate-the-ssh-key-with-the-following" aria-label="Permalink to &quot;Generate the \`ssh\` key with the following:&quot;">​</a></h4><div class="language-bat"><button title="Copy Code" class="copy"></button><span class="lang">bat</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">cd</span><span style="color:#A6ACCD;"> ~/.ssh </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">ssh-keygen</span><span style="color:#A6ACCD;"> -t rsa -b </span><span style="color:#F78C6C;">2048</span></span></code></pre></div><p>It will ask you to enter the name of the key for example <code>id_bitbucket_rsa</code></p><p>When prompted to Enter passphrase, you can either provide a password or leave the password empty. If you input a password, you will be prompted for this password each time SSH is used, such as using Git commands (git push, git pull, and git fetch).</p><h4 id="add-the-ssh-key-to-your-agent" tabindex="-1">Add the ssh key to your agent <a class="header-anchor" href="#add-the-ssh-key-to-your-agent" aria-label="Permalink to &quot;Add the ssh key to your agent&quot;">​</a></h4><div class="language-bat"><button title="Copy Code" class="copy"></button><span class="lang">bat</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">cd</span><span style="color:#A6ACCD;"> ~/.ssh </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">ssh-add</span><span style="color:#A6ACCD;"> id_bitbucket_rsa</span></span></code></pre></div><p>You may face an error</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span></span>
<span class="line"><span style="color:#A6ACCD;">@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @</span></span>
<span class="line"><span style="color:#A6ACCD;">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span></span>
<span class="line"><span style="color:#A6ACCD;">Permissions for &#39;id_bitbucket_rsa&#39; are too open.</span></span>
<span class="line"><span style="color:#A6ACCD;">It is required that your private key files are NOT accessible by others.</span></span>
<span class="line"><span style="color:#A6ACCD;">This private key will be ignored.</span></span></code></pre></div><p>The solution is by changing the permissions of the private key</p><ul><li>Right click and choose <code>Properties</code></li><li>Navigate to the <code>Security</code> tab and click <code>Advanced</code>.</li><li>Change the owner to you, disable inheritance and delete all permissions. Then grant yourself &quot;Full control&quot; and save the permissions.</li></ul><h3 id="apply-your-ssh-to-your-bitbucket-org" tabindex="-1">Apply your ssh to your Bitbucket.org <a class="header-anchor" href="#apply-your-ssh-to-your-bitbucket-org" aria-label="Permalink to &quot;Apply your ssh to your Bitbucket.org&quot;">​</a></h3><p>To add an SSH key to your <a href="https://bitbucket.org/account/settings/ssh-keys/" target="_blank" rel="noreferrer">user account</a>:</p><ul><li><p>At bitbucket.org, select your avatar (Your profile and settings) from the navigation bar at the top of the screen.</p></li><li><p>Under Settings, select Personal settings.</p></li><li><p>Under Security, select SSH keys.</p></li><li><p>Select Add the public pair of the generated key.</p></li><li><p>In the Add SSH key dialog, provide a Label to help you identify which key you are adding.</p></li></ul><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Pro tip: to copy the content of file to the clipboard use the following as an example</p><div class="language-bat"><button title="Copy Code" class="copy"></button><span class="lang">bat</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">cd</span><span style="color:#A6ACCD;"> ~/.ssh </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> cat id_bitbucket_rsa.pub </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">clip</span></span></code></pre></div></div>`,36),l=[o];function i(p,r,c,d,h,u){return s(),a("div",null,l)}const b=e(n,[["render",i]]);export{g as __pageData,b as default};
